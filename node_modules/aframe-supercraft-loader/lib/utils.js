var POSITION = 'position';
var ROTATION = 'rotation';
var SCALE = 'scale';

/**
 * Generic entity creator given an object of attributes.
 */
function createEntity (attributes) {
  var el;
  el = document.createElement('a-entity');
  setAttributes(el, attributes);
  return el;
}
module.exports.createEntity = createEntity;

/**
 * Given attributes object, set attributes on entity.
 */
function setAttributes (el, attributes) {
  var attribute;
  for (attribute in attributes) {
    if (attribute === POSITION || attribute === SCALE) {
      el.object3D[attribute].copy(attributes[attribute]);
    } else if (attribute === ROTATION) {
      el.object3D.rotation.set(attributes[attribute].x, attributes[attribute].y,
                               attributes[attribute].z);
    } else {
      el.setAttribute(attribute, attributes[attribute]);
    }
  }
}
module.exports.setAttributes = setAttributes;

function createThing (thingData, deleteOriginalShapes) {
  var shapeEl;
  var shapeId;
  var thingEl;

  // Create entity.
  thingEl = createEntity(thingData.attributes);

  // Create shapes.
  for (shapeId in thingData.shapes) {
    shapeData = thingData.shapes[shapeId].attributes;
    shapeEl = createEntity(shapeData);
    thingEl.appendChild(shapeEl);
    if (deleteOriginalShapes) {
      thingEl.setAttribute('geometry-merger', {deleteOriginalEntities: true});
    } else {
      thingEl.setAttribute('geometry-merger', '');
    }
    thingEl.setAttribute('super-material', '');
  }

  return thingEl;
}
module.exports.createThing = createThing;
